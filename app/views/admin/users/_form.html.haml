- form_url = @user.new_record? ? admin_users_path : admin_user_path(@user)
- http_method = @user.new_record? ? :post : :put
= form_for(@user, :url => form_url, :html => {:method => http_method, :class => "form-horizontal"}) do |f|
  - if @user.errors.any?
    %div#error_explanation
      %h2= pluralize(@user.errors.count, "error")
      prohibited this page from being saved:
      %ul
        - @user.errors.full_messages.each do |msg|
          %li= msg

  .control-group
    = f.label :name, :class => "control-label"
    .controls
      = f.text_field :name, :placeholder => User.human_attribute_name(:name)

  .control-group
    = f.label :email, :class => "control-label"
    .controls
      = f.text_field :email, :placeholder => User.human_attribute_name(:email)

  .control-group
    = f.label :password, :class => "control-label"
    .controls
      = f.password_field :password, :placeholder => User.human_attribute_name(:password)

  .control-group
    = f.label :password_confirmation, :class => "control-label"
    .controls
      = f.password_field :password_confirmation, :placeholder => User.human_attribute_name(:password_confirmation)

  .control-group#admin_user_flag_area
    = f.label :admin, :class => "control-label"
    .controls
      = f.check_box :admin, :id => 'admin_user_flag'

  .control-group#limited_user_flag_area
    = f.label :limited, :class => "control-label"
    .controls
      = f.check_box :limited, :id => 'limited_user_flag'

  .control-group.actions
    .controls
      = f.submit t('actions.add_user'), :class => 'btn btn-primary'

:javascript
  $(function() {
    $("#admin_user_flag").bind("click", function() {
      $("#limited_user_flag_area").animate({opacity: "toggle"}, "slow");
    });

    $("#limited_user_flag").bind("click", function(){
      $("#admin_user_flag_area").animate({opacity: "toggle"}, "slow");
    });
  });

